{"ast":null,"code":"\"use client\";import{useState,useEffect,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{Search,X}from\"lucide-react\";import{useSeniorMode}from\"../core/SeniorModeContext\";import{searchMedicines}from\"../core/medicines\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchBar(){const[query,setQuery]=useState(\"\");const[suggestions,setSuggestions]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const[isLoading,setIsLoading]=useState(false);const{isSeniorMode}=useSeniorMode();const navigate=useNavigate();const searchRef=useRef(null);const debounceRef=useRef(null);useEffect(()=>{if(debounceRef.current){clearTimeout(debounceRef.current);}if(query.trim().length>0){setIsLoading(true);debounceRef.current=setTimeout(()=>{const results=searchMedicines(query);setSuggestions(results.slice(0,5));// Show top 5 suggestions\nsetShowSuggestions(true);setIsLoading(false);},300);}else{setSuggestions([]);setShowSuggestions(false);setIsLoading(false);}return()=>{if(debounceRef.current){clearTimeout(debounceRef.current);}};},[query]);const handleSearch=function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:query;if(searchQuery.trim()){navigate(\"/search?q=\".concat(encodeURIComponent(searchQuery.trim())));setShowSuggestions(false);setQuery(\"\");}};const handleSuggestionClick=suggestion=>{setQuery(suggestion.name);handleSearch(suggestion.name);};const clearSearch=()=>{setQuery(\"\");setSuggestions([]);setShowSuggestions(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full\",ref:searchRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search medicines, wellness products...\",value:query,onChange:e=>setQuery(e.target.value),onKeyPress:e=>e.key===\"Enter\"&&handleSearch(),className:\"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent \".concat(isSeniorMode?\"py-3 text-lg\":\"\")}),/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 \".concat(isSeniorMode?\"h-6 w-6\":\"h-5 w-5\")}),query&&/*#__PURE__*/_jsx(\"button\",{onClick:clearSearch,className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"\".concat(isSeniorMode?\"h-6 w-6\":\"h-5 w-5\")})})]}),showSuggestions&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 z-50 max-h-60 overflow-y-auto\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500 mx-auto\"})}):suggestions.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSuggestionClick(suggestion),className:\"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 \".concat(isSeniorMode?\"py-4\":\"\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:suggestion.image||\"/placeholder.svg\",alt:suggestion.name,className:\"w-8 h-8 object-cover rounded\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium \".concat(isSeniorMode?\"text-lg\":\"text-sm\"),children:suggestion.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 \".concat(isSeniorMode?\"text-base\":\"text-xs\"),children:[\"by \",suggestion.brand,\" \\u2022 \\u20B9\",suggestion.price]})]})]})},index)),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSearch(),className:\"w-full text-left px-4 py-3 text-green-600 hover:bg-green-50 font-medium \".concat(isSeniorMode?\"py-4 text-lg\":\"text-sm\"),children:[\"View all results for \\\"\",query,\"\\\"\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center text-gray-500 \".concat(isSeniorMode?\"text-lg\":\"text-sm\"),children:[\"No medicines found for \\\"\",query,\"\\\"\"]})})]});}","map":{"version":3,"names":["useState","useEffect","useRef","useNavigate","Search","X","useSeniorMode","searchMedicines","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchBar","query","setQuery","suggestions","setSuggestions","showSuggestions","setShowSuggestions","isLoading","setIsLoading","isSeniorMode","navigate","searchRef","debounceRef","current","clearTimeout","trim","length","setTimeout","results","slice","handleSearch","searchQuery","arguments","undefined","concat","encodeURIComponent","handleSuggestionClick","suggestion","name","clearSearch","className","ref","children","type","placeholder","value","onChange","e","target","onKeyPress","key","onClick","map","index","src","image","alt","brand","price"],"sources":["C:/Users/Rohit/Downloads/wellnest-platform/client/src/components/SearchBar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { Search, X } from \"lucide-react\"\nimport { useSeniorMode } from \"../core/SeniorModeContext\"\nimport { searchMedicines, Medicine } from \"../core/medicines\"\n\nexport default function SearchBar() {\n  const [query, setQuery] = useState(\"\")\n  const [suggestions, setSuggestions] = useState<Medicine[]>([])\n  const [showSuggestions, setShowSuggestions] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const { isSeniorMode } = useSeniorMode()\n  const navigate = useNavigate()\n  const searchRef = useRef(null)\n  const debounceRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n\n  useEffect(() => {\n    if (debounceRef.current) {\n      clearTimeout(debounceRef.current)\n    }\n\n    if (query.trim().length > 0) {\n      setIsLoading(true)\n      debounceRef.current = setTimeout(() => {\n        const results = searchMedicines(query)\n        setSuggestions(results.slice(0, 5)) // Show top 5 suggestions\n        setShowSuggestions(true)\n        setIsLoading(false)\n      }, 300)\n    } else {\n      setSuggestions([])\n      setShowSuggestions(false)\n      setIsLoading(false)\n    }\n\n    return () => {\n      if (debounceRef.current) {\n        clearTimeout(debounceRef.current)\n      }\n    }\n  }, [query])\n\n  const handleSearch = (searchQuery = query) => {\n    if (searchQuery.trim()) {\n      navigate(`/search?q=${encodeURIComponent(searchQuery.trim())}`)\n      setShowSuggestions(false)\n      setQuery(\"\")\n    }\n  }\n\n  const handleSuggestionClick = (suggestion: Medicine) => {\n    setQuery(suggestion.name)\n    handleSearch(suggestion.name)\n  }\n\n  const clearSearch = () => {\n    setQuery(\"\")\n    setSuggestions([])\n    setShowSuggestions(false)\n  }\n\n  return (\n    <div className=\"relative w-full\" ref={searchRef}>\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          placeholder=\"Search medicines, wellness products...\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          onKeyPress={(e) => e.key === \"Enter\" && handleSearch()}\n          className={`w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent ${\n            isSeniorMode ? \"py-3 text-lg\" : \"\"\n          }`}\n        />\n\n        <Search\n          className={`absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 ${\n            isSeniorMode ? \"h-6 w-6\" : \"h-5 w-5\"\n          }`}\n        />\n\n        {query && (\n          <button\n            onClick={clearSearch}\n            className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n          >\n            <X className={`${isSeniorMode ? \"h-6 w-6\" : \"h-5 w-5\"}`} />\n          </button>\n        )}\n      </div>\n\n      {/* Suggestions Dropdown */}\n      {showSuggestions && (\n        <div className=\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 z-50 max-h-60 overflow-y-auto\">\n          {isLoading ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500 mx-auto\"></div>\n            </div>\n          ) : suggestions.length > 0 ? (\n            <>\n              {suggestions.map((suggestion, index) => (\n                <button\n                  key={index}\n                  onClick={() => handleSuggestionClick(suggestion)}\n                  className={`w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ${\n                    isSeniorMode ? \"py-4\" : \"\"\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <img\n                      src={suggestion.image || \"/placeholder.svg\"}\n                      alt={suggestion.name}\n                      className=\"w-8 h-8 object-cover rounded\"\n                    />\n                    <div>\n                      <p className={`font-medium ${isSeniorMode ? \"text-lg\" : \"text-sm\"}`}>{suggestion.name}</p>\n                      <p className={`text-gray-500 ${isSeniorMode ? \"text-base\" : \"text-xs\"}`}>\n                        by {suggestion.brand} • ₹{suggestion.price}\n                      </p>\n                    </div>\n                  </div>\n                </button>\n              ))}\n              <button\n                onClick={() => handleSearch()}\n                className={`w-full text-left px-4 py-3 text-green-600 hover:bg-green-50 font-medium ${\n                  isSeniorMode ? \"py-4 text-lg\" : \"text-sm\"\n                }`}\n              >\n                View all results for \"{query}\"\n              </button>\n            </>\n          ) : (\n            <div className={`p-4 text-center text-gray-500 ${isSeniorMode ? \"text-lg\" : \"text-sm\"}`}>\n              No medicines found for \"{query}\"\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}